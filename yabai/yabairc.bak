#!/usr/bin/env sh
# -- load scripting-addition (needs sudoers NOPASSWD entry) --
yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

# minimal config to test socket + SA
yabai -m config layout bsp
yabai -m config window_gap 8
# --- look & layout (Hyprland gaps/borders) ---
yabai -m config layout                 bsp
yabai -m config window_gap             8
yabai -m config top_padding            8
yabai -m config bottom_padding         8
yabai -m config left_padding           8
yabai -m config right_padding          8

yabai -m config window_border          on
yabai -m config window_border_width    2
yabai -m config active_window_border_color  0xff0db7d4   # like rgba(0DB7D4FF)
yabai -m config normal_window_border_color  0x00313136   # like rgba(31313600)

# Hyprland: focus follows mouse
yabai -m config focus_follows_mouse    autofocus
yabai -m config mouse_follows_focus    on

# Hyprland: dwindle-ish -> use bsp (yabai has bsp/stack)
yabai -m config auto_balance           off
yabai -m config split_ratio            0.50

# Drag/resize with modifier (Super≈cmd on mac)
yabai -m config mouse_modifier         cmd
yabai -m config mouse_action1          move
yabai -m config mouse_action2          resize

# Optional: float some apps (like Hyprland rules)
yabai -m rule --add app='System Settings' manage=off
yabai -m rule --add app='Calculator'      manage=off
yabai -m rule --add app='Preview'         manage=off

yabai -m display --focus 2


# macOS doesn’t expose Hyprland blur/rounding/animations.
# Start yabai in the background if launched by launchd/homebrew service.
echo "yabai configuration loaded.."
